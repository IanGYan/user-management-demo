# ==============================================
# 用户管理系统后端环境变量配置
# ==============================================

# 应用程序配置
# -----------------------
NODE_ENV=development
PORT=3001
API_PREFIX=api

# 数据库配置
# -----------------------
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=user_management_dev
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/user_management?schema=public

# JWT 认证配置
# -----------------------
# 注意: 生产环境中请使用强密钥！
JWT_SECRET=your-super-secret-jwt-key-change-in-production-please-use-a-strong-256-bit-key
JWT_EXPIRES_IN=30m
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production-please-use-a-strong-256-bit-key
JWT_REFRESH_EXPIRES_IN=7d

# 邮件服务配置
# -----------------------
EMAIL_HOST=localhost
EMAIL_PORT=1025
EMAIL_USER=
EMAIL_PASSWORD=
EMAIL_FROM=noreply@userapp.com
EMAIL_FROM_NAME=用户管理系统

# Redis 配置（用于缓存和队列）
# -----------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# 安全配置
# -----------------------
# bcrypt 加密轮数（推荐 12）
BCRYPT_ROUNDS=12

# CORS 配置
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# 速率限制配置
# -----------------------
# TTL: 时间窗口（秒）
THROTTLE_TTL=60
# LIMIT: 最大请求数
THROTTLE_LIMIT=100

# 登录安全配置
# -----------------------
# 最大登录失败次数
MAX_LOGIN_ATTEMPTS=5
# 账户锁定时间（分钟）
ACCOUNT_LOCK_TIME=15

# 邮箱验证配置
# -----------------------
# 验证链接有效期（小时）
EMAIL_VERIFICATION_EXPIRES=24
# 密码重置链接有效期（小时）
PASSWORD_RESET_EXPIRES=1

# 文件上传配置
# -----------------------
# 最大文件大小（MB）
MAX_FILE_SIZE=5
# 允许的文件类型
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif

# 日志配置
# -----------------------
LOG_LEVEL=debug
LOG_FILE=logs/app.log

# 监控和健康检查
# -----------------------
HEALTH_CHECK_TIMEOUT=5000
METRICS_ENABLED=true

# Docker 环境变量（仅用于容器化部署）
# -----------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=user_management_dev

# ==============================================
# 环境变量使用说明
# ==============================================

# 1. 复制此文件为 .env：
#    cp .env.example .env

# 2. 根据您的环境修改相应的值，特别注意：
#    - JWT 密钥必须在生产环境中更改
#    - 数据库连接信息
#    - 邮件服务配置

# 3. 生产环境安全注意事项：
#    - 使用强密码和密钥
#    - 启用 HTTPS
#    - 限制 CORS 源
#    - 使用环境变量管理服务

# 4. 开发环境快速启动：
#    npm run start:dev

# 5. 生产环境部署：
#    npm run build
#    npm run start:prod